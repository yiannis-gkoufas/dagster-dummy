# Dagster Helm chart values for Qovery deployment

# Global image settings for Dagster components
global:
  dagsterHome: "/opt/dagster/dagster_home"

# Dagster core images
dagsterWebserver:
  replicaCount: 1
  image:
    repository: docker.io/dagster/dagster-webserver
    tag: latest
    pullPolicy: Always
  resources:
    requests:
      cpu: 250m
      memory: 512Mi
    limits:
      cpu: 500m
      memory: 1Gi

dagsterDaemon:
  enabled: true
  image:
    repository: docker.io/dagster/dagster-daemon
    tag: latest
    pullPolicy: Always
  resources:
    requests:
      cpu: 250m
      memory: 512Mi
    limits:
      cpu: 500m
      memory: 1Gi

runLauncher:
  type: K8sRunLauncher
  config:
    k8sRunLauncher:
      imagePullPolicy: Always
      loadInclusterConfig: true
      runK8sConfig:
        containerConfig:
          image:
            repository: docker.io/dagster/dagster-k8s
            tag: latest
            pullPolicy: Always

dagster-user-deployments:
  enabled: true
  enableSubchart: true
  deployments:
    - name: dagster-dummy
      image:
        repository: ghcr.io/yiannis-gkoufas/dagster-dummy
        tag: latest
        pullPolicy: Always
      dagsterApiGrpcArgs:
        - "-m"
        - "dagster_dummy"
      port: 3030
      includeConfigInLaunchedRuns:
        enabled: true
      resources:
        requests:
          cpu: 250m
          memory: 512Mi
        limits:
          cpu: 500m
          memory: 1Gi

postgresql:
  enabled: true
  image:
    repository: docker.io/library/postgres
    tag: latest
    pullPolicy: Always
  postgresqlUsername: dagster
  postgresqlPassword: dagster
  postgresqlDatabase: dagster
  service:
    port: 5432
  persistence:
    enabled: true
    size: 8Gi

ingress:
  enabled: false
